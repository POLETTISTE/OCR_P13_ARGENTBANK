{"ast":null,"code":"var _jsxFileName = \"/Users/ste/Documents/JOB/OPENCLASSROOMS/PROJET 13/argentbank/src/components/Form/index.jsx\",\n  _s = $RefreshSig$();\nimport \"./style.scss\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCircleUser } from \"@fortawesome/free-solid-svg-icons\";\n// import { redirect } from \"react-router-dom\"\n\n// import store from \"../../app/store\"\n// import { useSelector, useDispatch } from \"react-redux\"\n// import { getTodoAsync, addTodoAsync, showLogin } from \"./features/loginSlice\"\n\n// import { Redirect } from \"react-router-dom\"\n\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button, Alert } from \"react-bootstrap\";\nimport { userLogin } from \"../../services/userLogin\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { logingPending, logingSuccess, logingError, logingRemember } from \"./loginSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Form = () => {\n  _s();\n  const {\n    isLoading,\n    error,\n    isRemember\n  } = useSelector(state => state.login);\n  const dispatch = useDispatch();\n  let navigate = useNavigate();\n  const [credientials, setCredientials] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  function handelChange(_ref) {\n    let {\n      currentTarget\n    } = _ref;\n    const {\n      value,\n      name\n    } = currentTarget;\n    setCredientials({\n      ...credientials,\n      [name]: value\n    });\n  }\n  async function handelSubmit(e) {\n    e.preventDefault();\n    dispatch(logingPending());\n    try {\n      const isAuth = await userLogin(credientials);\n      if (isRemember) {\n        localStorage.setItem(\"token\", isAuth.body.token);\n      } else {\n        localStorage.removeItem(\"token\");\n      }\n      dispatch(logingSuccess());\n      navigate(\"/profilePage/Profile\");\n    } catch (error) {\n      console.log(error);\n      dispatch(logingError(error.response.data.message));\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"sign-in-content\",\n    children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n      icon: faCircleUser,\n      className: \"sign-in-icon\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handelSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          name: \"email\",\n          onChange: handelChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          onChange: handelChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-remember\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"remember-me\",\n          name: \"remember-me\",\n          defaultChecked: isRemember,\n          onChange: () => dispatch(logingRemember(!isRemember))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"remember-me\",\n          children: \"Remember me\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"success\",\n        className: \"sign-in-button\",\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(Form, \"PqnRBA3FFS6psyZuItQBaDoEa28=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n_c = Form;\nexport default Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["FontAwesomeIcon","faCircleUser","axios","React","useState","useNavigate","Button","Alert","userLogin","useSelector","useDispatch","logingPending","logingSuccess","logingError","logingRemember","Form","isLoading","error","isRemember","state","login","dispatch","navigate","credientials","setCredientials","email","password","handelChange","currentTarget","value","name","handelSubmit","e","preventDefault","isAuth","localStorage","setItem","body","token","removeItem","console","log","response","data","message"],"sources":["/Users/ste/Documents/JOB/OPENCLASSROOMS/PROJET 13/argentbank/src/components/Form/index.jsx"],"sourcesContent":["import \"./style.scss\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faCircleUser } from \"@fortawesome/free-solid-svg-icons\"\n// import { redirect } from \"react-router-dom\"\n\n// import store from \"../../app/store\"\n// import { useSelector, useDispatch } from \"react-redux\"\n// import { getTodoAsync, addTodoAsync, showLogin } from \"./features/loginSlice\"\n\n// import { Redirect } from \"react-router-dom\"\n\nimport axios from \"axios\"\n\nimport React, { useState } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { Button, Alert } from \"react-bootstrap\"\nimport { userLogin } from \"../../services/userLogin\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport {\n  logingPending,\n  logingSuccess,\n  logingError,\n  logingRemember,\n} from \"./loginSlice\"\n\nconst Form = () => {\n  const { isLoading, error, isRemember } = useSelector((state) => state.login)\n  const dispatch = useDispatch()\n  let navigate = useNavigate()\n  const [credientials, setCredientials] = useState({\n    email: \"\",\n    password: \"\",\n  })\n\n  function handelChange({ currentTarget }) {\n    const { value, name } = currentTarget\n    setCredientials({\n      ...credientials,\n      [name]: value,\n    })\n  }\n\n  async function handelSubmit(e) {\n    e.preventDefault()\n\n    dispatch(logingPending())\n    try {\n      const isAuth = await userLogin(credientials)\n\n      if (isRemember) {\n        localStorage.setItem(\"token\", isAuth.body.token)\n      } else {\n        localStorage.removeItem(\"token\")\n      }\n\n      dispatch(logingSuccess())\n      navigate(\"/profilePage/Profile\")\n    } catch (error) {\n      console.log(error)\n      dispatch(logingError(error.response.data.message))\n    }\n  }\n\n  return (\n    <section className=\"sign-in-content\">\n      <FontAwesomeIcon icon={faCircleUser} className=\"sign-in-icon\" />\n      <h1>Sign In</h1>\n      <form onSubmit={handelSubmit}>\n        <div className=\"input-wrapper\">\n          <label htmlFor=\"username\">Username</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            name=\"email\"\n            onChange={handelChange}\n          />\n        </div>\n        <div className=\"input-wrapper\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            name=\"password\"\n            onChange={handelChange}\n          />\n        </div>\n        <div className=\"input-remember\">\n          <input\n            type=\"checkbox\"\n            id=\"remember-me\"\n            name=\"remember-me\"\n            defaultChecked={isRemember}\n            onChange={() => dispatch(logingRemember(!isRemember))}\n          />\n          <label htmlFor=\"remember-me\">Remember me</label>\n        </div>\n        <Button type=\"submit\" variant=\"success\" className=\"sign-in-button\">\n          Sign In\n        </Button>\n      </form>\n    </section>\n  )\n}\n\nexport default Form\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}